<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:int="http://www.springframework.org/schema/integration"
       xmlns:jms="http://www.springframework.org/schema/integration/jms"
       xmlns:int-twitter="http://www.springframework.org/schema/integration/twitter"
       xmlns:int-stream="http://www.springframework.org/schema/integration/stream"
       xmlns:amq="http://activemq.apache.org/schema/core"

       xsi:schemaLocation="
   http://www.springframework.org/schema/beans
   http://www.springframework.org/schema/beans/spring-beans.xsd
   http://www.springframework.org/schema/integration
   http://www.springframework.org/schema/integration/spring-integration.xsd
   http://www.springframework.org/schema/integration/twitter
   http://www.springframework.org/schema/integration/twitter/spring-integration-twitter.xsd
   http://www.springframework.org/schema/integration/stream
   http://www.springframework.org/schema/integration/stream/spring-integration-stream.xsd
   http://activemq.apache.org/schema/core
   http://activemq.apache.org/schema/core/activemq-core.xsd
   http://www.springframework.org/schema/integration/jms
   http://www.springframework.org/schema/integration/jms/spring-integration-jms.xsd">

  <int:channel id="BerichtUit"/>

  <amq:broker id="broker"
              useJmx="true"
              persistent="false"
              start="true">
    <amq:transportConnectors>
      <amq:transportConnector uri="tcp://localhost:61616"/>
    </amq:transportConnectors>
  </amq:broker>

  <bean id="integrationToDefactoNotaOvergedragenReplyQueue" class="org.apache.activemq.command.ActiveMQQueue">
    <constructor-arg value="queue/CisToIntegrationNotaOvergedragenReplyQueue"/>
  </bean>

  <jms:outbound-channel-adapter id="cisToIntegrationNotaOvergedragenReplyChannelAdapter"
                                connection-factory="connectionFactory"
                                destination="integrationToDefactoNotaOvergedragenReplyQueue"
                                channel="BerichtUit"/>

  <int:channel id="BerichtIn" />
  
  <bean id="cisJmsListenerContainer" class="org.springframework.jms.listener.DefaultMessageListenerContainer">
    <property name="maxConcurrentConsumers" value="1" />
    <property name="maxMessagesPerTask" value="1" />
    <property name="cacheLevelName" value="CACHE_NONE" />
    <property name="connectionFactory" ref="connectionFactory" />
    <property name="transactionManager" ref="transactionManager" />
    <property name="sessionTransacted" value="true" />
    <property name="transactionTimeout" value="3600" />
    <property name="receiveTimeout" value="5000" />
    <property name="destination" ref="integrationToDefactoNotaOvergedragenReplyQueue" />
  </bean>
  <jms:inbound-gateway id="jmsCisIn" container="cisJmsListenerContainer" request-channel="BerichtIn" />

</beans>